<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Базальтовая арматура 4 мм</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-100 min-h-screen flex flex-col items-center py-10">
    <div
      class="max-w-lg bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden"
    >
      <img
        src="https://via.placeholder.com/600x600.png?text=Basalto+4mm"
        alt="Базальтовая арматура"
        class="w-full h-72 object-cover"
      />
      <div class="p-5">
        <h2 class="text-xl font-bold text-gray-800 mb-2">
          Базальто-композитная арматура 4 мм
        </h2>
        <p class="text-gray-700 text-sm leading-relaxed">
          Базальто-композитная арматура считается альтернативой металлопроката.
          Её используют для армирования строительных конструкций при
          возведении фундаментов, мостов и инфраструктурных сооружений.
        </p>

        <ul class="text-sm text-gray-600 mt-3 space-y-1">
          <li>Вес 1-го погонного метра: 0.85 кг</li>
          <li>Вес 50-метровой бухты: 2,55 кг</li>
          <li>Вес 100-метровой бухты: 5,1 кг</li>
        </ul>

        <div class="flex items-center justify-between mt-5">
          <span class="text-gray-700">Цена за метр:</span>
          <span id="price" class="font-semibold text-green-600">8 222 сум</span>
        </div>

        <!-- Калькулятор -->
        <div class="flex items-center justify-between mt-4">
          <div class="flex items-center gap-3">
            <button
              id="minus"
              class="bg-gray-200 text-lg font-bold rounded-full w-8 h-8 flex items-center justify-center"
            >
              −
            </button>
            <span id="meters" class="text-lg font-semibold">1</span>
            <button
              id="plus"
              class="bg-gray-200 text-lg font-bold rounded-full w-8 h-8 flex items-center justify-center"
            >
              +
            </button>
          </div>
          <span id="total" class="text-base font-semibold text-gray-800">8 222 сум</span>
        </div>

        <button
          id="orderBtn"
          class="w-full bg-green-600 hover:bg-green-700 text-white mt-5 py-2 rounded-xl text-sm font-medium"
        >
          Заказать
        </button>
      </div>
    </div>

    <!-- Модальное окно заказа -->
    <div
      id="modal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center"
    >
      <div class="bg-white rounded-xl p-6 w-80">
        <h3 class="text-lg font-bold mb-3 text-gray-800">Оформить заказ</h3>
        <input
          type="text"
          id="name"
          placeholder="Ваше имя"
          class="w-full border rounded-lg px-3 py-2 mb-3"
        />
        <input
          type="tel"
          id="phone"
          placeholder="Ваш телефон"
          class="w-full border rounded-lg px-3 py-2 mb-3"
        />
        <div class="flex justify-between gap-2">
          <button
            id="sendOrder"
            class="flex-1 bg-green-600 text-white py-2 rounded-lg font-medium"
          >
            Отправить
          </button>
          <button
            onclick="closeModal()"
            class="flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg font-medium"
          >
            Отмена
          </button>
        </div>
      </div>
    </div>

    <script>
      const price = 8222;
      let meters = 1;

      const metersEl = document.getElementById("meters");
      const totalEl = document.getElementById("total");
      const modal = document.getElementById("modal");

      function updateTotal() {
        totalEl.textContent = (meters * price).toLocaleString() + " сум";
        metersEl.textContent = meters;
      }

      document.getElementById("minus").onclick = () => {
        if (meters > 1) meters--;
        updateTotal();
      };

      document.getElementById("plus").onclick = () => {
        meters++;
        updateTotal();
      };

      document.getElementById("orderBtn").onclick = () => {
        modal.classList.remove("hidden");
        modal.classList.add("flex");
      };

      function closeModal() {
        modal.classList.add("hidden");
      }

      document.getElementById("sendOrder").onclick = async () => {
        const name = document.getElementById("name").value.trim();
        const phone = document.getElementById("phone").value.trim();

        if (!name || !phone) {
          alert("Пожалуйста, введите имя и телефон!");
          return;
        }

        // ⚙️ ВСТАВЬ СВОЙ ВЕБХУК СЮДА
        const webhookUrl =
          "https://rebar.bitrix24.kz/rest/1/njvrqx0snxon2xw3/crm.lead.add.json";

        const data = {
          fields: {
            TITLE: "Заказ с сайта RebarUzbekistan",
            NAME: name,
            PHONE: [{ VALUE: phone, VALUE_TYPE: "WORK" }],
            COMMENTS: `Товар: Базальтовая арматура 4мм
Количество: ${meters} м
Сумма: ${(meters * price).toLocaleString()} сум`,
          },
        };

        await fetch(webhookUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        alert("✅ Заявка успешно отправлена!");
        closeModal();
      };
    </script>
  </body>
</html>
